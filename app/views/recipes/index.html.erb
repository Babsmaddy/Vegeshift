<div class="container">

    <div class="row justify-content-center p-4">
      <%= render "/shared/searchbar" %>
      </div>


  <div class="row row-cols-1 row-cols-sm-2 g-3 mb-4">
  <% if @recipes.any? %>
    <% @recipes.each do |recipe| %>
      <div class="col-6">
        <div class="card m-3">
          <div class="position-relative">
            <% if recipe.photo.attached? %>
                <%= link_to recipe_path(recipe) do %>
                  <%= cl_image_tag recipe.photo.key, class: "card-img-top"%>
                  <div class="card-recipe-co2 justify-content-center align-items-center">
                <%#= image_tag("co2-cloud.png", class: "img-fluid me-2") %>
                  <span class="co2-text"><%= recipe.co2.round %>g Co2</span>
             </div>
                <% end %>
            <% else %>
                <%= link_to recipe_path(recipe) do %>
                  <%= image_tag "home_recipe_4.png", class: "card-img-top"%>
                  <div class="card-recipe-co2 justify-content-center align-items-center">
                <%#= image_tag("co2-cloud.png", class: "img-fluid me-2") %>
                  <span class="co2-text"><%= recipe.co2.round %>g Co2</span>
             </div>
                <% end %>
            <% end  %>
          </div>


          <div class="card-body d-flex flex-column position-relative">
            <div class="row align-items-center">
              <div class="text-center mb-3">
                <h2
                 class="text-capitalize m-2"
                  style="font-weight: bold; font-size: 1rem;">
                  <%= recipe.name %>
               </h2>
              </div>
            </div>

              <div class="d-flex align-items-center justify-content-between mx-1 gap-2 position-absolute bottom-0 mb-3">
                <div class="icon-container d-flex justify-content-between align-items-center">
                  <p class="card-text">
                  <i class="fa-regular fa-clock"></i>
                    <%= recipe.time %> min
                  </p>
                </div>

                <div class="icon-container align-items-center">
                      <%#= image_tag("difficulty.png", class: "img-fluid") %>
                    <%#= recipe.difficulty %>
                    <% if recipe.difficulty.present? %>
                      <span class="difficulty-star">
                    <% case recipe.difficulty %>
                    <% when 1 %>
                      <i class="fa-solid fa-star"></i>
                    <% when 2 %>
                      <i class="fa-solid fa-star"></i>
                      <i class="fa-solid fa-star"></i>
                    <% when 3 %>
                      <i class="fa-solid fa-star"></i>
                      <i class="fa-solid fa-star"></i>
                      <i class="fa-solid fa-star"></i>
                    <% end %>
                      </span>
                    <% end %>
                </div>
              </div>
        </div>
      </div>
    </div>  
  <% end %>
  <% else %>

  <div class="warning-text col-12 text-center mt-5">
    <h1 style="top:0" class="mb-3">Oups !</h1>
    <h4>La recette <span class="text-primary"><%= params[:query] %> </span> n'existe pas encore mais vous pouvez la créer !</h4>
  </div>


<% end %>
  </div>
</div>
<div class="row justify-content-center mt-4">
    <div class="text-center mt-1 p-0">
      <a href="/recipes/new" class="btn-grad">Je végétalise une recette existante</a>
    </div>
  </div>
<div class="row justify-content-center mt-4 " style="position: relative">
  <%= image_tag "fond-no-results.png", style: "
    top: 15px;
    position: absolute;"
 %>
  </div>
<div class="container justify-content-center bg-white mt-2">
